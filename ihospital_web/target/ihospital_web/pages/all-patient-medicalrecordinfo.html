<!DOCTYPE html>
<html lang="en" class="no-js">
  <head>
    <base href="" />
	<!-- Basic Page Needs

     ================================================== -->
	 
	 <meta charset="utf-8">
	 
	 <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    
	 <link rel="icon" type="image/png" href="../images/favicon.png">
	
     <title>Medicom</title>
    
     <meta name="description" content="">
    
     <meta name="keywords" content="">
    
     <meta name="author" content="">

     <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
    
     <meta name="format-detection" content="telephone=no">

	 <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800" rel="stylesheet">
	 
	
	<!-- CSS
    
     ================================================== -->
	 
	 
	<!-- Theme Color
	============================================= -->
	<link rel="stylesheet" id="color" href="../css/blue.css">
    
	
	<!-- Medicom Style
	============================================= -->
    <link rel="stylesheet" href="../css/medicom.css">

	
	<!-- Bootstrap
	============================================= -->
    <link rel="stylesheet" href="../css/bootstrap.css">

    
	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
	<!-- SCRIPTS
     ================================================== -->

	</head>
    <body class="fixed-header" ng-app="ihospital" ng-controller="patientMedicalRecordInfoController" ng-init="initInfo()">

		<!-- Document Wrapper
		============================================= -->
		<div id="wrapper" class="clearfix">

			<!-- Header
		============================================= -->
			<!-- Header
		============================================= -->
			<header id="header" class="medicom-header ">

				<!-- Top Row
				============================================= -->
				<div class="colourfull-row"></div>

				<div class="container">


					<!-- Primary Navigation
					============================================= -->
					<nav class="navbar navbar-default" role="navigation">

						<!-- Brand and toggle get grouped for better mobile display
						============================================= -->

						<div class="navbar-header">

							<button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#primary-nav">
								<span class="sr-only">Toggle navigation</span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
								<span class="icon-bar"></span>
							</button>

							<a class="navbar-brand" href="index.html"><img src="../images/logo.png" alt="" title=""></a>

						</div>


						<div class="collapse navbar-collapse navbar-right" id="primary-nav">

							<ul class="nav navbar-nav">

								<li class="dropdown active">
									<a href="src/main/webapp/pages/all-patient-index.html" class="dropdown-toggle">Home</a>

								</li>

								<li class="dropdown">
									<a href="src/main/webapp/pages/all-patient-departmentlist.html" class="dropdown-toggle">Department</a>

								</li>
								<li class="dropdown">
									<a href="src/main/webapp/pages/all-patient-doctorlist.html">Doctor</a>

								</li>
								<li class="dropdown">

									<a href="src/main/webapp/pages/all-patient-newslist.html" class="dropdown-toggle">News</a>

								</li>
								<li class="dropdown">
									<a href="#" class="dropdown-toggle" data-toggle="dropdown"></i>Record</a>
									<ul class="dropdown-menu">
										<li><a href="src/main/webapp/pages/all-patient-appointlist.html">Register</a></li>
										<li><a href="src/main/webapp/pages/all-patient-medicalrecordlist.html">Diagnose</a></li>
									</ul>
								</li>

								<li class="dropdown last">
									<a href="../logout" class="dropdown-toggle" >Log Out</a>

								</li>
							</ul>

						</div>

					</nav>

				</div>

			</header>

			<!-- Sub Page Banner
			============================================= -->
			<section class="sub-page-banner text-center" data-stellar-background-ratio="0.3">

				<div class="container">
					<h1 class="entry-title">Medical Record</h1>
					<p>See your records in our hospital</p>
				</div>
				
			</section>

			<!-- Sub Page Content
			============================================= -->
			<div id="sub-page-content" class="clearfix">
    
				<section class="team-description">
					
					<div class="container">
											
					  <div class="row">
					
						<div class="col-md-12 clearfix">
							<h2 class="light bordered">Medical<span>Information</span></h2>	
								<ul class="list-unstyled pricing-table">
								<li class="list-dark">
									<span class="firsthead">Name</span>
									<span class="text-center">{{medicalRecordInfo.patientName}}</span>
									
								</li>
								<li class="list-dark">
									<span class="firsthead">Sex</span>
									<span class="text-center">{{patient.patientGenderStr}}</span>
									
								</li>
								<li class="list-dark">
									<span class="firsthead">Date</span>
									<span class="text-center">{{medicalRecordInfo.time}}</span>
									
								</li>
								<li class="list-dark">
									<span class="firsthead">Type</span>
									<span class="text-center">{{appointment.priorityStr}}</span>
									
								</li>
								<li class="list-dark">
									<span class="firsthead">Doctor</span>
									<span class="text-center">{{medicalRecordInfo.physicianName}}</span>
									
								</li>
								<li class="list-dark">
									<span class="firsthead">Department</span>
									<span class="text-center">{{medicalRecordInfo.departName}}</span>
									
								</li>
								<li class="list-dark">
									<span class="firsthead">Medicine</span>
									<span class="text-center firsthead">Num</span>
									<span class="text-right firsthead">  Drug  Price</span>
									
								</li>

								<li class="list-light" ng-repeat="entity in list">
									<span>{{entity.medicineName}}</span>
									<span class="text-center ">{{entity.num}}</span>
									<span class="text-right">￥{{entity.medicinePrice}}</span>
								</li>
								
								<li class="list-dark">
									<span class="firsthead">Total Price</span>
									
									<span class="text-right firsthead">￥{{total}}</span>
									
								</li>
								
								<li class="list-dark">
									<span class="firsthead">Details</span>
									
									 <span class="text> <textarea disabled="disabled">{{medicalRecordInfo.diagnosis}}</textarea></span>
									
								</li>
								<li class="list-dark">
									<span class="firsthead">Advice</span>
									 <span class="text> <textarea disabled="disabled">{{medicalRecordInfo.narrative}}</textarea></span>

								</li>

							</ul>	

						</div>
						
						</div>

					</div>
						
					</div>

				</section>

		</div><!--end sub-page-content-->

		<div class="colourfull-row"></div>

		<!-- Footer
		============================================= -->
		<footer id="footer" class="light">

			<!-- Copyright
			============================================= -->
			<p class="copyright text-center">Copyright &copy; 2014 Medicom. All right reserved.</p>

		</footer>
	
		<!-- back to top -->
		<a href="#." class="back-to-top" id="back-to-top"><i class="fa fa-angle-up"></i></a>
	
    </div><!--end #wrapper-->

    <!-- All Javascript 
	============================================= -->

	<script src="../js/modernizr-2.6.2.min.js"></script>
	<script src="../js/jquery.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/jquery.stellar.js"></script>
	<script src="../js/jquery-ui-1.10.3.custom.js"></script>
    <script src="../js/owl.carousel.js"></script>
    <script src="../js/counter.js"></script>
    <script src="../js/waypoints.js"></script>
	<script src="../js/jquery.uniform.js"></script>
    <script src="../js/easyResponsiveTabs.js"></script>
	<script src="../js/jquery.fancybox.pack.js"></script>
	<script src="../js/jquery.fancybox-media.js"></script>
	<script src="../js/jquery.mixitup.js"></script>
	<script src="../js/forms-validation.js"></script>
	<script src="../js/jquery.jcarousel.min.js"></script>
	<script src="../js/jquery.easypiechart.min.js"></script>
	<script src="../js/scripts.js"></script>
		<script type="text/javascript" src="../plugins/angularjs/angular.min.js"></script>
		<script type="text/javascript" >
			var app=angular.module('ihospital',[]);

			app.config(['$locationProvider',function($locationProvider){
				$locationProvider.html5Mode(true);
			}]);
			app.controller("patientMedicalRecordInfoController",function($scope,$http,$filter,$location){
				var id="";

				if($location.search().id){
					id=$location.search().id;
				}
				$scope.medicalRecordInfo={};
				$scope.patient={};
				$scope.appointment={};

				$scope.findOneMedicalRecord=function(){
					if(id!==""){
						$http.get('../patientMedical/findOneMedicalRecord.do?id='+id).success(
								function(response){
									$scope.medicalRecordInfo=response;
									$scope.medicalRecordInfo.time=$filter("date")(response.time,"yyyy-MM-dd HH:mm:ss");
									$scope.medicalRecordInfo.departName=response.departName;
									$scope.medicalRecordInfo.physicianName=response.physicianName;
									$scope.medicalRecordInfo.patientName=response.patientName;
									$scope.medicalRecordInfo.diagnosis=response.diagnosis;
									$scope.medicalRecordInfo.narrative=response.narrative;
								}
						);
					}

				};
				$scope.findPatientByPathoId=function(){
					if(id!==""){

						$http.get('../patientMedical/findPatientByPathoId.do?id='+id).success(
								function(response){
									$scope.patient=response;
									$scope.patient.patientGenderStr=response.patientGenderStr;
								}
						);
					}

				};
				$scope.findAppointmentByPathoId=function(){
					if(id!==""){
						$http.get('../patientMedical/findAppointmentByPathoId.do?id='+id).success(
								function(response){
									$scope.appointment=response;
									// $scope.appointment.time=$filter("date")(response.time,"yyyy-MM-dd HH:mm:ss");
									$scope.appointment.treatTime=response.treatTime;
									$scope.appointment.priorityStr=response.priorityStr;
								}
						);
					}

				};
				$scope.findMedicineInformationByPathoId=function(){
					if(id!==""){

						$http.get('../patientMedical/findMedicineInformationByPathoId.do?id='+id).success(
								function(response){
									$scope.list=response.medicineRows;
									$scope.total=response.total;
								}
						);
					}

				};

				//加载页面时执行该函数，用ng-init标签写在body标签里
				$scope.initInfo=function () {

					$scope.findOneMedicalRecord();
					$scope.findPatientByPathoId();
					$scope.findAppointmentByPathoId();
					$scope.findMedicineInformationByPathoId();

				}

			});

		</script>
  </body>
</html>